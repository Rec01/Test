## Тестовое задание
  
Проект состоит из трех микросервисов:
* **test1** - REST API с авторизацией по JWT-токенам на порту 8080 с методом POST /entities;
* **test2** - gRPC-сервис для валидации запросов на порту 6565, 
принимает запросы от test1 без авторизации. Если свойство value четное число, то валидация проходит успешно;
* **test3** - REST API для сохранения результата в БД (in-memory H2), 
принимает запросы от сервиса test1 без авторизации.

---
_Разные подходы к взаимодействию сервисов применены с целью демонстрации навыков.
JMS/очереди не использовались из-за потребности в развертывании инфраструктуры._ 

Сервисы test1 и test3 идут с онлайн-документацией, реализованной на Swagger.
Для просмотра использовать http://localhost:8080/swagger-ui.html и http://localhost:8081/swagger-ui.html

Но для сервиса test1 использовать не получится из-за наличия авторизации. Она хоть и есть в сваггере, но не настроена
по причине отсутствия в составе проекта сервера авторизации, который выдает токены. 
А в test3 можно по окончании нагрузочного тестирования посмотреть общее кол-во записей и сами записи.

---
Запросы в REST API сервиса test1 можно выполнить с помощью cli-утилиты curl.  

REST API защищён - необходимо установить http-заголовок ```X-MyHeader: test```, а также предъявить токен доступа.  

> Подойдёт любой jwt токен, содержащий свойство ```"iss": "com.example"```. Он может быть сгенерирован на сайте [jwt.io](jwt.io)  

---
#### Пример запроса к API:
> брать из preview - рендерится без переносов
  
`curl -X POST http://localhost:8080/entities
 -H "Content-Type: application/json"
 -H "X-MyHeader: test"
 -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJpc3MiOiJjb20uZXhhbXBsZSJ9.8yA1CQCWoZ26MZpvnnBErSZC6xkkZEndyGD4Gv11aQA"
 -d "{  \"data\": \"string data\",  \"name\": \"name12\",  \"value\": 12}"
`
#### Для выполнения нагрузочного тестирования  
* Собрать и запустить все сервисы  
> В папке каждого проекта выполнить: `mvnw clean package`  
Затем запустить каждый микросервис: `java -jar testN.jar`  

* В корне проекта test1 выполнить `mvnw gatling:test`  

**Результаты нагрузочных тестов**: 1000 одновременных клиентов, каждый из которых выполняет 
по 20 запросов. Среднее кол-во обрабатываемых системой запросов не менее 700 в секунду,
т.е. не менее 42 тыс. в минуту.
Можно играть параметрами requestCount (кол-во запросов на юзера) и 
simUsers (кол-во юзеров) в файле BootLoadSimulation.scala 
Результаты запуска в наглядном виде приведены в каталоге !result.
